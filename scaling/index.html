---
layout: default
title: Stock Forecasting
---
<div class="blurb">
	      <h2>Feature Scaling</h2>
	      <p>
                It is always useful to visualize and explore the data
                before performing any modeling. We combine the exploration
                and data scaling in this section. Scaling is very important 
                for many machine learning algorithms, so we will scale all
                of our continuous variables. 
              </p>

              <p>
                I focus in this section primarily on the distributions of the features,
                rather than correlation or scatter plots between trends. Quote information
                is incredibally noisy, and attempts at these lead to one of two things:
                either plots showing little to no correlation due to daily noise, or 
                apparent high correlation, as the market is always tending towards an
                overall increase, and all trends point this way. We will save examination
                of trends for the analysis section.
	      </p>


              <!-- diff_co -->
              <h3>diff_co</h3>

              <p>
                We will start with the percent difference between the closing and
                opening price for the day, denoted diff_co. We display the histogram 
                of this distribution in Figure 1. Examining a few cases, we see
                FDP is almost entirely contained within &plusmn 5%, wheras BA is
                spread to within a &plusmn 10% range.
              </p>

              <figure>
                <img src="/python_trader/images/exploration/diff_co_short.jpg" 
                     alt="Percent difference between close and open">
                <figcaption>
                  Figure 1 - Distribution of percent difference between the daily close 
                  and open prices for 15 of our samples. There are clear differences
                  in diff_co distribution for different stocks.
                </figcaption>
              </figure>

              <p>
                <br>
                With all these different distributions, it is useful to look at the
                combination of these distribution, as we do in Figure 2. We wind up with
                a normal distribution, with the bulk of the distribution falling within
                that &plusmn 5%.
              </p>

              <figure>
                <img src="/python_trader/images/exploration/diff_co_short_sum.jpg" 
                     alt="Bulk difference between close and open">
                <figcaption>
                  Figure 2 - Histogram as in Figure 1, but combined for all quotes.
                </figcaption>
              </figure>

              <p>
                <br>
                The distribution of all the diff_co values show a clear normal
                distribution. We perfom a z-scaling on the normally distributed
                data, as seen in Figure 3. The scaling performed is a custom scheme,
                where we omit data points on the furthest extreme, and renormalize.
                This is repeated until the new fits perform minimal change in the 
                distribtuion.
              </p>

              <figure>
                <img src="/python_trader/images/exploration/diff_co_short_scaled_sum.jpg" 
                     alt="Rescaled difference between close and open">
                <figcaption>
                  Figure 3 - Z-scaled distribution of diff_co, for all quotes.
                </figcaption>
              </figure>


              <!-- diff_hl -->
              <h3>diff_hl</h3>

              <p>
                Similar to the analysis we performed for the difference between
                close and opening prices, we generated a feature for the percent
                difference between daily high and lows, diff_hl. The distribution of 
                values is exclusively negative by design, and skewed towards higher
                diff_hl, as can be seen in Figure 4. We perform z-scaling
                on the diff_hl, as can be seen in Figure 5.
              </p>

              <figure>
                <img src="/python_trader/images/exploration/diff_hl_short_sum.jpg" 
                     alt="Difference between daily highs and lows for all quotes">
                <figcaption>
                  Figure 4 - Histogram of the cumulative difference between daily high and 
                  low prices, for all quotes. The distribution is slightly skewed towards 
                  larger values.
                </figcaption>
              </figure>

              <figure>
                <img src="/python_trader/images/exploration/diff_hl_short_scaled_sum.jpg"
                     alt="Z-scaling of diff_hl">
                <figcaption>
                  Figure 5 - Z-scaled distribtuion of diff_hl. 
                </figcaption>
              </figure>


              
              <!-- momentum -->


              <p>
                <br>
                <a href="/pca">Next up: Principle Component Analysis</a>
              </p>

<!--
              <figure>
                <img src="/python_trader/images/exploration/" 
                     alt="">
                <figcaption>
                  Figure - 
                </figcaption>
              </figure>
-->

</div><!-- /.blurb -->
